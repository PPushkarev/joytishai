{"uid":"2873854470b01417","name":"CoT RELIABILITY: Verification of the model's logical steps","fullName":"tests.test_reasoning.TestReasoning#test_step_by_step_reasoning","historyId":"82ff65f6c67c2f594ecd4cf9cc7c3d38","time":{"start":1769168707527,"stop":1769168718325,"duration":10798},"description":"Force the model to break down its reasoning into 3 steps and verify logical consistency.","descriptionHtml":"<p>Force the model to break down its reasoning into 3 steps and verify logical consistency.</p>\n","status":"broken","statusMessage":"AttributeError: 'str' object has no attribute 'get'","statusTrace":"self = <tests.test_reasoning.TestReasoning object at 0x7f32bb304c10>\nnetwork_client = <httpx.AsyncClient object at 0x7f32a56a87d0>\n\n    @allure.title(\"CoT RELIABILITY: Verification of the model's logical steps\")\n    @allure.description(\"Force the model to break down its reasoning into 3 steps and verify logical consistency.\")\n    async def test_step_by_step_reasoning(self, network_client):\n        payload = base_payload.copy()\n    \n        # Inject prompt to trigger the reasoning logic\n        payload[\"user_query\"] = (\n            \"Что меня ждет сегодня? \"\n            \"Думай шаг за шагом: \"\n            \"Шаг 1: Оцени влияние транзита Солнца. \"\n            \"Шаг 2: Оцени влияние транзита Луны. \"\n            \"Шаг 3: Сделай итоговый прогноз на день. \"\n            \"Обязательно используй слово 'Шаг' перед каждым пунктом.\"\n        )\n    \n        with allure.step(\"Sending request with CoT requirement\"):\n            response = await network_client.post(INTERPRETATION_URL, json=payload)\n            data = response.json()\n>           ai_text = str(data.get(\"ai_analysis\", {}).get(\"astrological_analysis\", \"\"))\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE           AttributeError: 'str' object has no attribute 'get'\n\ntests/test_reasoning.py:57: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1769167829034,"stop":1769167829034,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"network_client","time":{"start":1769168707505,"stop":1769168707526,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1769168707505,"stop":1769168707506,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Force the model to break down its reasoning into 3 steps and verify logical consistency.","status":"broken","statusMessage":"AttributeError: 'str' object has no attribute 'get'","statusTrace":"self = <tests.test_reasoning.TestReasoning object at 0x7f32bb304c10>\nnetwork_client = <httpx.AsyncClient object at 0x7f32a56a87d0>\n\n    @allure.title(\"CoT RELIABILITY: Verification of the model's logical steps\")\n    @allure.description(\"Force the model to break down its reasoning into 3 steps and verify logical consistency.\")\n    async def test_step_by_step_reasoning(self, network_client):\n        payload = base_payload.copy()\n    \n        # Inject prompt to trigger the reasoning logic\n        payload[\"user_query\"] = (\n            \"Что меня ждет сегодня? \"\n            \"Думай шаг за шагом: \"\n            \"Шаг 1: Оцени влияние транзита Солнца. \"\n            \"Шаг 2: Оцени влияние транзита Луны. \"\n            \"Шаг 3: Сделай итоговый прогноз на день. \"\n            \"Обязательно используй слово 'Шаг' перед каждым пунктом.\"\n        )\n    \n        with allure.step(\"Sending request with CoT requirement\"):\n            response = await network_client.post(INTERPRETATION_URL, json=payload)\n            data = response.json()\n>           ai_text = str(data.get(\"ai_analysis\", {}).get(\"astrological_analysis\", \"\"))\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE           AttributeError: 'str' object has no attribute 'get'\n\ntests/test_reasoning.py:57: AttributeError","steps":[{"name":"Sending request with CoT requirement","time":{"start":1769168707527,"stop":1769168718324,"duration":10797},"status":"broken","statusMessage":"AttributeError: 'str' object has no attribute 'get'\n","statusTrace":"  File \"/home/runner/work/joytishai/joytishai/tests/test_reasoning.py\", line 57, in test_step_by_step_reasoning\n    ai_text = str(data.get(\"ai_analysis\", {}).get(\"astrological_analysis\", \"\"))\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"1b43080ede3176c2","name":"log","source":"1b43080ede3176c2.txt","type":"text/plain","size":114}],"parameters":[],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"network_client::finalizer","time":{"start":1769168718327,"stop":1769168718428,"duration":101},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1769168718428,"stop":1769168718428,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Chain-of-Thought (CoT) Verification"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_reasoning"},{"name":"subSuite","value":"TestReasoning"},{"name":"host","value":"runnervmymu0l"},{"name":"thread","value":"2976-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_reasoning"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["asyncio"]},"source":"2873854470b01417.json","parameterValues":[]}