{"uid":"39e6f9ef6df1ea37","name":"test_3_production_flow_with_real_data","fullName":"tests.test_api.TestAstroEngineAPI#test_3_production_flow_with_real_data","historyId":"f3d1f1231a6608759597da93e4948751","time":{"start":1768835628006,"stop":1768835641785,"duration":13779},"description":"FULL INTEGRATION (Testing  service orchestrator).","descriptionHtml":"<p>FULL INTEGRATION (Testing  service orchestrator).</p>\n","status":"failed","statusMessage":"AssertionError: Field 'astrological_analysis' is empty or missing!\nassert ''","statusTrace":"self = <tests.test_api.TestAstroEngineAPI object at 0x7f1a8f1878d0>\napi_client = <httpx.AsyncClient object at 0x7f1a809f2790>\n\n    @allure.story(\"Production external endpoit\")\n    @allure.description(\"FULL INTEGRATION (Testing  service orchestrator).\")\n    \n    async def test_3_production_flow_with_real_data(self, api_client):\n        \"\"\"TEST 3: FULL INTEGRATION (Testing API JOYTISH server and AI Consultation).\"\"\"\n    \n        with allure.step(f\"Calling My Service: {INTERPRETATION_URL}\"):\n            response = await api_client.post(INTERPRETATION_URL, json=payload_ai)\n    \n        with allure.step(\"Checking code response\"):\n            assert (response.status_code == 200), f\"External Engine failed: {response.status_code}\"\n    \n        with allure.step(\"Extracting and Checking AI Text\"):\n            data = response.json()\n    \n    \n            ai_text_content = data.get(\"astrological_analysis\", \"\")\n    \n    \n            allure.attach(\n                str(ai_text_content),\n                name=\"Actual AI Analysis Text\",\n                attachment_type=allure.attachment_type.TEXT\n            )\n    \n    \n>           assert ai_text_content, \"Field 'astrological_analysis' is empty or missing!\"\nE           AssertionError: Field 'astrological_analysis' is empty or missing!\nE           assert ''\n\ntests/test_api.py:336: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1768835601331,"stop":1768835601332,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_client","time":{"start":1768835627981,"stop":1768835628005,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1768835627981,"stop":1768835627981,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"FULL INTEGRATION (Testing  service orchestrator).","status":"failed","statusMessage":"AssertionError: Field 'astrological_analysis' is empty or missing!\nassert ''","statusTrace":"self = <tests.test_api.TestAstroEngineAPI object at 0x7f1a8f1878d0>\napi_client = <httpx.AsyncClient object at 0x7f1a809f2790>\n\n    @allure.story(\"Production external endpoit\")\n    @allure.description(\"FULL INTEGRATION (Testing  service orchestrator).\")\n    \n    async def test_3_production_flow_with_real_data(self, api_client):\n        \"\"\"TEST 3: FULL INTEGRATION (Testing API JOYTISH server and AI Consultation).\"\"\"\n    \n        with allure.step(f\"Calling My Service: {INTERPRETATION_URL}\"):\n            response = await api_client.post(INTERPRETATION_URL, json=payload_ai)\n    \n        with allure.step(\"Checking code response\"):\n            assert (response.status_code == 200), f\"External Engine failed: {response.status_code}\"\n    \n        with allure.step(\"Extracting and Checking AI Text\"):\n            data = response.json()\n    \n    \n            ai_text_content = data.get(\"astrological_analysis\", \"\")\n    \n    \n            allure.attach(\n                str(ai_text_content),\n                name=\"Actual AI Analysis Text\",\n                attachment_type=allure.attachment_type.TEXT\n            )\n    \n    \n>           assert ai_text_content, \"Field 'astrological_analysis' is empty or missing!\"\nE           AssertionError: Field 'astrological_analysis' is empty or missing!\nE           assert ''\n\ntests/test_api.py:336: AssertionError","steps":[{"name":"Calling My Service: http://127.0.0.1:8000/api/v1/forecast/generate","time":{"start":1768835628006,"stop":1768835641784,"duration":13778},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Checking code response","time":{"start":1768835641784,"stop":1768835641784,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Extracting and Checking AI Text","time":{"start":1768835641784,"stop":1768835641785,"duration":1},"status":"failed","statusMessage":"AssertionError: Field 'astrological_analysis' is empty or missing!\nassert ''\n","statusTrace":"  File \"/home/runner/work/joytishai/joytishai/tests/test_api.py\", line 336, in test_3_production_flow_with_real_data\n    assert ai_text_content, \"Field 'astrological_analysis' is empty or missing!\"\n","steps":[],"attachments":[{"uid":"c1a5532583c145d9","name":"Actual AI Analysis Text","source":"c1a5532583c145d9.txt","type":"text/plain","size":0}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"6ff6d84934f48fa7","name":"log","source":"6ff6d84934f48fa7.txt","type":"text/plain","size":114}],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"api_client::finalizer","time":{"start":1768835641869,"stop":1768835641970,"duration":101},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1768835641970,"stop":1768835641970,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"story","value":"Production external endpoit"},{"name":"feature","value":"API"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_api"},{"name":"subSuite","value":"TestAstroEngineAPI"},{"name":"host","value":"runnervmmtnos"},{"name":"thread","value":"3003-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_api"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["asyncio"]},"source":"39e6f9ef6df1ea37.json","parameterValues":[]}